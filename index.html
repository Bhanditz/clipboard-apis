<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Clipboard API and events</title>
  <link href="https://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet" type="text/css">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in Â§N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em 0;
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: normal;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 7809f77ac4334cedf065291be85285ae374255df" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "Â¶"; }
            .heading > a.self-link::before { content: "Â§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "â";
            }
            .css::after, .property::after, .descriptor::after {
                content: "â";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "â";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "â";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1>Clipboard API and events</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editorâs Draft, <time class="dt-updated" datetime="2016-12-20">20 December 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/clipboard-apis/">https://w3c.github.io/clipboard-apis/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/clipboard-apis/">https://www.w3.org/TR/clipboard-apis/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webapps@w3.org?subject=%5Bclipboard-apis%5D%20YOUR%20TOPIC%20HERE">public-webapps@w3.org</a> with subject line â<kbd>[clipboard-apis] <i data-lt="">â¦ message topic â¦</i></kbd>â (<a href="http://lists.w3.org/Archives/Public/public-webapps/" rel="discussion">archives</a>)</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/clipboard-apis/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:garykac@google.com">Gary Kacmarcik</a> (<span class="p-org org">Google</span>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:gked@microsoft.com">Grisha Lyukshin</a> (<span class="p-org org">Microsoft</span>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Hallvord R. M. Steen</span> (<span class="p-org org">Mozilla</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> Â© 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>Â®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This document describes APIs for clipboard operations such as copy, cut and

paste in web applications.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editorsâ draft.
  It is provided for discussion only and may change at any moment.
  Its publication here does not imply endorsement of its contents by W3C.
  Donât cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/clipboard-apis">https://github.com/w3c/clipboard-apis</a>.</strong> </p>
   <p> If you wish to make comments regarding this document, please send them to this specificationâs <a href="https://github.com/w3c/clipboard-apis">GitHub repository</a> or (<a href="http://lists.w3.org/Archives/Public/public-webapps/">archived</a>) public mailing list <a href="mailto:public-webapps@w3.org?Subject=%5Bclipboard-apis%5D%20PUT%20SUBJECT%20HERE">public-webapps@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>). When sending e-mail, please put the text âclipboard-apisâ in the subject, preferably like this: â[clipboard-apis] <em>â¦summary of commentâ¦</em>. All comments are welcome. </p>
   <p> This document was produced by the <a href="https://www.w3.org/WebPlatform/WG/">Web Platform Working Group</a>. </p>
   <p> This document was produced by a group operating under
  the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
  W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/83482/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
  that page also includes instructions for disclosing a patent.
  An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#secintro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#Cases"><span class="secno">2</span> <span class="content">Use Cases</span></a>
     <ol class="toc">
      <li><a href="#Rich"><span class="secno">2.1</span> <span class="content">Rich content editing</span></a>
      <li><a href="#graphics-semantics"><span class="secno">2.2</span> <span class="content">Graphics with built-in semantics</span></a>
      <li><a href="#Mathematic"><span class="secno">2.3</span> <span class="content">Mathematical information</span></a>
     </ol>
    <li><a href="#terminolofy"><span class="secno">3</span> <span class="content">Terminology</span></a>
    <li>
     <a href="#clipboard-actions-and-events"><span class="secno">4</span> <span class="content">Clipboard actions and events</span></a>
     <ol class="toc">
      <li>
       <a href="#actions"><span class="secno">4.1</span> <span class="content">Actions</span></a>
       <ol class="toc">
        <li><a href="#copy-action"><span class="secno">4.1.1</span> <span class="content">The copy action</span></a>
        <li><a href="#cut-action"><span class="secno">4.1.2</span> <span class="content">The cut action</span></a>
        <li><a href="#paste-action"><span class="secno">4.1.3</span> <span class="content">The paste action</span></a>
       </ol>
      <li><a href="#processing-model"><span class="secno">4.2</span> <span class="content">Processing model for event dispatch</span></a>
     </ol>
    <li><a href="#clipboard-event-interfaces"><span class="secno">5</span> <span class="content"><span>Clipboard event</span> interfaces</span></a>
    <li><a href="#writing-contents-to-clipboard"><span class="secno">6</span> <span class="content"><span>Writing contents to the clipboard</span></span></a>
    <li>
     <a href="#integration-with-other-scripts-and-events"><span class="secno">7</span> <span class="content">Integration with other scripts and events</span></a>
     <ol class="toc">
      <li><a href="#allow-modify-clipboard"><span class="secno">7.1</span> <span class="content">Event handlers that are <span>allowed to modify the clipboard</span></span></a>
      <li><a href="#allow-read-clipboard"><span class="secno">7.2</span> <span class="content">Event handlers that are <span>allowed to read from clipboard</span></span></a>
      <li><a href="#integration-with-rich-text-editing"><span class="secno">7.3</span> <span class="content">Integration with rich text editing APIs</span></a>
      <li><a href="#otherevents"><span class="secno">7.4</span> <span class="content">Interaction with other events</span></a>
      <li><a href="#selection-mod"><span class="secno">7.5</span> <span class="content">Event listeners that modify selection or focus</span></a>
     </ol>
    <li>
     <a href="#pasting-html"><span class="secno">8</span> <span class="content">Pasting HTML and multi-part data</span></a>
     <ol class="toc">
      <li><a href="#security-risks"><span class="secno">8.1</span> <span class="content">Security risks</span></a>
      <li><a href="#general-security-policies"><span class="secno">8.2</span> <span class="content">General security policies</span></a>
     </ol>
    <li>
     <a href="#other-security-considerations"><span class="secno">9</span> <span class="content">Other security and privacy considerations</span></a>
     <ol class="toc">
      <li><a href="#privacy-concerns"><span class="secno">9.1</span> <span class="content">Privacy concerns</span></a>
      <li><a href="#nuisances"><span class="secno">9.2</span> <span class="content">Nuisance considerations</span></a>
     </ol>
    <li>
     <a href="#mandatory-data-types-x"><span class="secno">10</span> <span class="content"><span>Mandatory data types</span></span></a>
     <ol class="toc">
      <li><a href="#reading-from-clipboard"><span class="secno">10.1</span> <span class="content">Reading from the clipboard</span></a>
      <li><a href="#writing-to-clipboard"><span class="secno">10.2</span> <span class="content">Writing to the clipboard</span></a>
     </ol>
    <li><a href="#security"><span class="secno">11</span> <span class="content">Security Considerations</span></a>
    <li><a href="#privacy"><span class="secno">12</span> <span class="content">Privacy Considerations</span></a>
    <li><a href="#Acknowledg"><span class="secno">13</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="secintro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#secintro"></a></h2>
   <p><i>This section is non-normative.</i></p>
   <p>This specification defines the common clipboard operations of cutting,
	copying and pasting, in such a way that they are exposed to Web Applications
	and can be adapted to provide advanced functionalities. Its goal is to
	provide for compatibility where possible with existing implementations.</p>
   <h2 class="heading settled" data-level="2" id="Cases"><span class="secno">2. </span><span class="content">Use Cases</span><a class="self-link" href="#Cases"></a></h2>
   <p><i>This section is non-normative.</i></p>
   <p>There are many use cases for being able to change the default clipboard
	operations (cut/copy/paste). We have collected
	a few samples to demonstrate possible uses, although these may not all be
	supported by this specification.</p>
   <h3 class="heading settled" data-level="2.1" id="Rich"><span class="secno">2.1. </span><span class="content">Rich content editing</span><a class="self-link" href="#Rich"></a></h3>
   <p>When copying text which contains hyperlinks or other structure,
		it is often useful to be able to reformat the content to preserve important
		information.</p>
   <h3 class="heading settled" data-level="2.2" id="graphics-semantics"><span class="secno">2.2. </span><span class="content">Graphics with built-in semantics</span><a class="self-link" href="#graphics-semantics"></a></h3>
   <p>In order to make web applications which allow the manipulation of rich
		text, or of graphic content such as <a data-link-type="biblio" href="#biblio-svg">[SVG]</a>, it is useful to provide a mechanism
		that allows for copying more than just the rendered content.</p>
   <h3 class="heading settled" data-level="2.3" id="Mathematic"><span class="secno">2.3. </span><span class="content">Mathematical information</span><a class="self-link" href="#Mathematic"></a></h3>
   <p>With content such as mathematics, simply copying rendered text and pasting
		it into another application generally leads to most of the semantics being
		lost. MathML often needs to be transformed to be copied as plain text, for example to make sure "to the power of" is shown with the caret  "^" sign in a formula plain-text input. The XML source
		could also be placed in the clipboard with the appropriate transformation occurring at paste time.</p>
   <h2 class="heading settled" data-level="3" id="terminolofy"><span class="secno">3. </span><span class="content">Terminology</span><a class="self-link" href="#terminolofy"></a></h2>
   <p>The term <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="editable-context">editable context</dfn> means any element that is either an <a data-link-type="dfn" href="http://w3c.github.io/editing/contentEditable.html#dfn-editing-host">editing host</a>, a textarea element, or an input element with its type
	attribute set to any of "text", "search", "tel",
	"url", "email", "password" or "number".</p>
   <h2 class="heading settled" data-level="4" id="clipboard-actions-and-events"><span class="secno">4. </span><span class="content">Clipboard actions and events</span><a class="self-link" href="#clipboard-actions-and-events"></a></h2>
   <p>This section defines clipboard actions and events and the processing model
	for event dispatch.</p>
   <h3 class="heading settled" data-level="4.1" id="actions"><span class="secno">4.1. </span><span class="content">Actions</span><a class="self-link" href="#actions"></a></h3>
   <p>Each action has two flags called <em>script-triggered</em> and <em>script-may-access-clipboard</em>.</p>
   <p></p>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="script-triggered">script-triggered<a class="self-link" href="#script-triggered"></a></dfn> flag is set if the action runs because
		of a script, for example a <code>document.execCommand()</code> call.
		Future scripting APIs that interact with the clipboard should also use
		these actions, and the <em>script-triggered</em> flag must be set
		accordingly.</p>
   <p>The <dfn data-dfn-type="dfn" data-noexport="" id="script-may-access-clipboard">script-may-access-clipboard<a class="self-link" href="#script-may-access-clipboard"></a></dfn> flag is set as follows:</p>
   <ol>
    <li data-md="">
     <p>If action is <em>copy</em> or <em>cut</em> and the script thread
is <a data-link-type="dfn" href="#allowed-to-modify-the-clipboard" id="ref-for-allowed-to-modify-the-clipboard-1">allowed to modify the clipboard</a>, then</p>
     <ol>
      <li data-md="">
       <p>Set the actionâs <em>script-may-access-clipboard</em> flag</p>
     </ol>
    <li data-md="">
     <p>If action is <em>paste</em> and the script thread is <a data-link-type="dfn" href="#allowed-to-read-from-clipboard" id="ref-for-allowed-to-read-from-clipboard-1">allowed to
read from clipboard</a>, then</p>
     <ol>
      <li data-md="">
       <p>set the actionâs <em>script-may-access-clipboard</em> flag.</p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="4.1.1" id="copy-action"><span class="secno">4.1.1. </span><span class="content">The copy action</span><a class="self-link" href="#copy-action"></a></h4>
   <p class="note" role="note">Note: When the user initiates a copy action, the implementation <a data-link-type="dfn" href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-1">fires a clipboard event</a> named <em>copy</em>. If the event is not canceled, the selected data will be
			copied to the clipboard.</p>
   <p class="note" role="note">Note: The current selection is not affected. The event bubbles and is
			cancelable.</p>
   <p class="note" role="note">Note: A script which uses the event.clipboardData API to control what
			ends up on the clipboard, needs to cancel the event. Otherwise, the
			data the script intends to place on the clipboard will be ignored.</p>
   <p class="note" role="note">Note: If there is no selection, the clipboard is not modified except
			if the script has added entries in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code>, for
			example by calling the <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData()</a> method, and canceled the event.</p>
<pre class="example javascript" id="example-f35a9bd5"><a class="self-link" href="#example-f35a9bd5"></a>document.addEventListener('copy', function(e){
  e.clipboardData.setData('text/plain', 'Hello, world!');
  e.clipboardData.setData('text/html', '&lt;b>Hello, world!&lt;/b>');
  e.preventDefault(); // We want our data, not data from any selection, to be written to the clipboard
});
</pre>
   <p>The copy action consists of the following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <em>script-triggered</em> flag is set</p>
     <ol>
      <li data-md="">
       <p>If the <em>script-may-access-clipboard</em> flag is unset</p>
       <ol>
        <li data-md="">
         <p>Return false from the copy action, terminate this algorithm</p>
       </ol>
     </ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-2">Fire a clipboard event</a> named <em>copy</em></p>
    <li data-md="">
     <p>If the event was not canceled</p>
     <ol>
      <li data-md="">
       <p>Copy the selected contents, if any, to the clipboard.
Implementations <em>should</em> create alternate text/html and
text/plain clipboard formats when content in a web page is selected.</p>
     </ol>
    <li data-md="">
     <p>else, if the event was canceled</p>
     <ol>
      <li data-md="">
       <p>Call the <a data-link-type="dfn" href="#writing-contents-to-the-clipboard" id="ref-for-writing-contents-to-the-clipboard-1">writing contents to the clipboard</a> algorithm,
passing on the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> list <em>items</em>,
a <em>clear-was-called</em> flag and a <em>types-to-clear</em> list.</p>
     </ol>
    <li data-md="">
     <p>Return true from the copy action</p>
   </ol>
   <h4 class="heading settled" data-level="4.1.2" id="cut-action"><span class="secno">4.1.2. </span><span class="content">The cut action</span><a class="self-link" href="#cut-action"></a></h4>
   <p class="note" role="note">Note: When the user initiates a cut action, the implementation <a data-link-type="dfn" href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-3">fires a clipboard event</a> named <em>cut</em>. In an <a data-link-type="dfn" href="#editable-context" id="ref-for-editable-context-1">editable context</a>, if the event is not
			canceled the action will place the selected data on the clipboard
			and remove the selection from the document.</p>
   <p class="note" role="note">Note: The event bubbles and is cancelable.</p>
   <p class="note" role="note">Note: The cut event fires before the selected data is removed. When
			the cut operation is completed, the selection is collapsed.</p>
   <p class="note" role="note">Note: In a non-<a data-link-type="dfn" href="#editable-context" id="ref-for-editable-context-2">editable context</a>, or if there is no selection,
			the <em>cut action</em> does nothing. The implementation fires the
			event regardless. In this case nothing, the clipboard is not
			modified except if the script has added entries in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> and the event is canceled.</p>
   <p class="note" role="note">Note: Any script which uses the event.clipboardData API to control
			what the cut event will write to the clipboard also needs to cancel
			the event. Otherwise, the data the script intends to place on the
			clipboard will be ignored.</p>
   <p>The cut action consists of the following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <em>script-triggered</em> flag is set</p>
     <ol>
      <li data-md="">
       <p>If the <em>script-may-access-clipboard</em> flag is unset</p>
       <ol>
        <li data-md="">
         <p>Return false from the cut action, terminate this algorithm</p>
       </ol>
     </ol>
    <li data-md="">
     <p><a data-link-type="dfn" href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-4">Fire a clipboard event</a> named <em>cut</em></p>
    <li data-md="">
     <p>If the event was not canceled</p>
     <ol>
      <li data-md="">
       <p>If there is a selection in an <a data-link-type="dfn" href="#editable-context" id="ref-for-editable-context-3">editable context</a> where
cutting is enabled</p>
       <ol>
        <li data-md="">
         <p>Copy the selected contents, if any, to the clipboard.
Implementations <em>should</em> create alternate
text/html and text/plain clipboard formats when content
in a web page is selected.</p>
        <li data-md="">
         <p>Remove the contents of the selection from the document
and collapse the selection.</p>
        <li data-md="">
         <p>Queue tasks to fire any events that should fire due to the
modification, see <a href="#integration-with-other-scripts-and-events">Â§7 Integration with other scripts and events</a> for details.</p>
       </ol>
      <li data-md="">
       <p>Else, if there is no selection or the context is not editable</p>
       <ol>
        <li data-md="">
         <p>Return false</p>
       </ol>
     </ol>
    <li data-md="">
     <p>Else, if the event was canceled</p>
     <ol>
      <li data-md="">
       <p>Call the <a data-link-type="dfn" href="#writing-contents-to-the-clipboard" id="ref-for-writing-contents-to-the-clipboard-2">writing contents to the clipboard</a> algorithm,
passing on the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> list <em>items</em>,
a <em>clear-was-called</em> flag and a <em>types-to-clear</em> list.</p>
     </ol>
    <li data-md="">
     <p>Return true from the cut action</p>
   </ol>
   <h4 class="heading settled" data-level="4.1.3" id="paste-action"><span class="secno">4.1.3. </span><span class="content">The paste action</span><a class="self-link" href="#paste-action"></a></h4>
   <p class="note" role="note">Note: When a user initiates a paste action, the implementation <a data-link-type="dfn" href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-5">fires a clipboard event</a> named <em>paste</em>. The event fires before any clipboard data is inserted.</p>
   <p class="note" role="note">Note: The event bubbles and is cancelable.</p>
   <p class="note" role="note">Note: If the cursor is in an editable element, the paste action will
			insert clipboard data in the most suitable format (if any) supported
			for the given context.</p>
   <p class="note" role="note">Note: The paste action has no effect in a non-<a data-link-type="dfn" href="#editable-context" id="ref-for-editable-context-4">editable
			context</a>, but the event fires regardless.</p>
   <p class="note" role="note">Note: When pasting, the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-store-mode">drag data store mode</a> flag is <em>read-only</em>, hence calling <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData()</a> from a <b>paste</b> event handler will not modify the data that is
			inserted, and not modify the data on the clipboard.</p>
<pre class="example javascript" id="example-aa4e3b8b"><a class="self-link" href="#example-aa4e3b8b"></a>document.addEventListener('paste', function(e){
    if(e.clipboardData.types.indexOf('text/html') > -1){
        processDataFromClipboard(e.clipboardData.getData('text/html'));
        e.preventDefault(); // We are already handling the data from the clipboard, we do not want it inserted into the document
    }
});
</pre>
   <p>For the paste action, the <em>script-may-access-clipboard</em> flag
			depends on an implementation-specific permission mechanism for
			determining what sites or apps may read from the clipboard. When a
			paste action is triggered by a script, the implementation must not
			make clipboard contents available without the userâs permission. If
			the permission has not already been granted, the permission prompt
			must include the hostname of the document associated with the script
			thread.</p>
   <p>The paste action consists of the following steps:</p>
   <ol>
    <li data-md="">
     <p>If the <em>script-triggered</em> flag is set</p>
     <ol>
      <li data-md="">
       <p>If <em>script-may-access-clipboard</em> is unset</p>
       <ol>
        <li data-md="">
         <p>Return false from the paste action, terminate this algorithm</p>
       </ol>
     </ol>
    <li data-md="">
     <p><a href="#fire-a-clipboard-event" id="ref-for-fire-a-clipboard-event-6">Fire a clipboard event</a> named <em>paste</em></p>
    <li data-md="">
     <p>If the event was not canceled</p>
     <ol>
      <li data-md="">
       <p>If there is a selection or cursor in an <a data-link-type="dfn" href="#editable-context" id="ref-for-editable-context-5">editable context</a> where pasting is enabled</p>
       <ol>
        <li data-md="">
         <p>Insert the most suitable content found on the clipboard, if any, into the context.</p>
        <li data-md="">
         <p>Queue tasks to fire any events that should fire due to the modification, see <a href="#integration-with-other-scripts-and-events">Â§7 Integration with other scripts and events</a> for details.</p>
       </ol>
      <li data-md="">
       <p>Else</p>
       <ol>
        <li data-md="">
         <p>Return false</p>
       </ol>
     </ol>
    <li data-md="">
     <p>Else, if the event was canceled</p>
     <ol>
      <li data-md="">
       <p>Return false</p>
     </ol>
    <li data-md="">
     <p>Return true from the action</p>
   </ol>
   <h3 class="heading settled" data-level="4.2" id="processing-model"><span class="secno">4.2. </span><span class="content">Processing model for event dispatch</span><a class="self-link" href="#processing-model"></a></h3>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="fire-a-clipboard-event">fire a clipboard event</dfn> of type <var>e</var>,</p>
   <ol>
    <li data-md="">
     <p>Let <var>clear-was-called</var> be <var>false</var></p>
    <li data-md="">
     <p>Let <var>types-to-clear</var> be an empty list</p>
    <li data-md="">
     <p>Let <var>clipboard-entry</var> be the sequence number of the current clipboard content, or null if the OS clipboard does not support sequence numbers</p>
    <li data-md="">
     <p>Let <var>trusted</var> be <var>true</var> if the event is generated by the user agent, <var>false</var> otherwise</p>
    <li data-md="">
     <p>Set <var>target</var> as follows:</p>
     <ol>
      <li data-md="">
       <p>If the context is editable:</p>
       <ol>
        <li data-md="">
         <p>Let <var>target</var> be the element that contains the start of the selection in document order, or <a data-link-type="dfn" href="http://www.w3.org/TR/html/sections.html#the-body-element">the body element</a> if there is no selection or cursor.</p>
       </ol>
      <li data-md="">
       <p>Else, if the context is not editable</p>
       <ol>
        <li data-md="">
         <p>Let <var>target</var> be the focused node, or <a data-link-type="dfn" href="http://www.w3.org/TR/html/sections.html#the-body-element">the body element</a> if no node has focus.</p>
       </ol>
     </ol>
    <li data-md="">
     <p>Process the event as follows:</p>
     <ol>
      <li data-md="">
       <p>If <var>e</var> is "paste"</p>
       <ol>
        <li data-md="">
         <p>Set the associated <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> objectâs <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-store-mode">drag data store mode</a> flag to <em>read-only</em></p>
        <li data-md="">
         <p>If <var>trusted</var> is <var>true</var>, or the implementation is configured to give script-generated events read access to the OS clipboard</p>
         <ol>
          <li data-md="">
           <p>For each part on the OS clipboard, carry out these steps:</p>
           <ol>
            <li data-md="">
             <p>If the current clipboard part contains plain text:</p>
             <ol>
              <li data-md="">
               <p>Ensure the text is in the encoding the scripting engine uses internally</p>
              <li data-md="">
               <p>Add one entry for the text to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-kind">drag data item kind</a> set to <em>string</em> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> set to <em>text/plain</em></p>
             </ol>
            <li data-md="">
             <p>If the current clipboard part represents file references:</p>
             <ol>
              <li data-md="">
               <p>Determine MIME type of referenced files</p>
              <li data-md="">
               <p>Add one entry per file reference to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-kind">drag data item kind</a> set to <em>file</em> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> set to the corresponding MIME type, or <code>application/octet-stream</code> if the fileâs type is unknown.</p>
             </ol>
            <li data-md="">
             <p>If the current clipboard part contains HTML- or XHTML-formatted text, according to the operating systemâs convention for describing such clipboard formats</p>
             <ol>
              <li data-md="">
               <p>If the implementation supports pasting HTML, the implementation <em>must</em> process the markup according to the following steps:</p>
               <ol>
                <li data-md="">
                 <p>Add one entry to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-kind">drag data item kind</a> set to <em>Plain Unicode string</em>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> set to <em>text/html</em> or <em>application/xhtml+xml</em> accordingly. Let <var>mainPartIndex</var> be the index of this entry in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code>.</p>
                <li data-md="">
                 <p>Extract the markup from the clipboard and use the relevant parser to construct a DOM tree</p>
                <li data-md="">
                 <p>If the markupâs source URL is known, resolve all relative URLs in HREF and SRC attributes using the source URL as base URL, and set the respective attributes to the resolved absolute URL</p>
                <li data-md="">
                 <p>If the markupâs origin is from a local application, check whether there are references to local files and/or other parts of the OS clipboardâs contents. If such references are found, references to sub-parts <em>must</em> be replaced by content-id references using the cid: URL scheme <a data-link-type="biblio" href="#biblio-rfc2392">[RFC2392]</a>. To do so, process each attribute referencing a local file or clipboard part according to the following steps:</p>
                 <p class="issue" id="issue-096a5049"><a class="self-link" href="#issue-096a5049"></a> Are these steps necessary? Do we know about native (platform) clipboard implementations that support multiple parts with internal references?</p>
                 <p class="issue" id="issue-6be1122f"><a class="self-link" href="#issue-6be1122f"></a> This feature is at risk because itâs unclear whether it is required, and because itâs hard to test in a cross-platform way.</p>
                 <ol>
                  <li data-md="">
                   <p>Let <var>itemNumber</var> be the number of items on the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code></p>
                  <li data-md="">
                   <p>Choose the appropriate steps from this list:</p>
                   <ol>
                    <li data-md="">
                     <p>If the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> of the current <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> object already contains an entry for the referenced file or clipboard part</p>
                     <ol>
                      <li data-md="">
                       <p>set <var>itemNumber</var> to the index of the existing entry</p>
                     </ol>
                    <li data-md="">
                     <p>Otherwise</p>
                     <ol>
                      <li data-md="">
                       <p>Add a new entry to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with <code>index</code> set to <var>itemNumber</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-kind">drag data item kind</a> set to "file", and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> set to the MIME type of the file or clipboard part if known, or <code>application/octet-stream</code> if the fileâs type is unknown.</p>
                      <li data-md="">
                       <p>Let the new entryâs internal <i>file name</i> be the file name part of the HTML attribute contents</p>
                      <li data-md="">
                       <p>Let the new entryâs <i>last modified date</i> be the timestamp of the referenced file or 0 if the entry references a clipboard part</p>
                     </ol>
                   </ol>
                  <li data-md="">
                   <p>Update the DOM attribute that referenced the local file or clipboard part to contain the string 'cid:' followed by <var>itemNumber</var>.</p>
                 </ol>
                <li data-md="">
                 <p>Serialize the processed DOM and update the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> entry referenced by <var>mainPartIndex</var> with the resulting HTML code</p>
               </ol>
             </ol>
            <li data-md="">
             <p>If the current clipboard part contains data in another supported binary or text-based format (see <a data-link-type="dfn" href="#mandatory-data-types" id="ref-for-mandatory-data-types-1">mandatory data types</a>):</p>
             <ol>
              <li data-md="">
               <p>Determine the MIME type of the data</p>
              <li data-md="">
               <p>Add one entry to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-kind">drag data item kind</a> set to <em>file</em>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> set to the corresponding MIME type</p>
             </ol>
           </ol>
         </ol>
        <li data-md="">
         <p>Update the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-files">files</a></code> property to match entries in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code>.</p>
        <li data-md="">
         <p>Update the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-types">types</a></code> property to match entries in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code>.</p>
       </ol>
      <li data-md="">
       <p>If <var>e</var> is "copy" or "cut"</p>
       <ol>
        <li data-md="">
         <p>Set the associated <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> objectâs <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-store-mode">drag data store mode</a> flag to <em>read/write</em></p>
       </ol>
     </ol>
    <li data-md="">
     <p>Dispatch an event named <var>e</var> which bubbles and is cancelable and which uses the <code class="idl"><a data-link-type="idl" href="#clipboardevent" id="ref-for-clipboardevent-1">ClipboardEvent</a></code> interface, with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a></code> set to <var>trusted</var>, at <var>target</var>.</p>
     <p>Implementation requirements for access to data during event dispatch are defined in <a data-link-type="biblio" href="#biblio-htmlls">[HTMLLS]</a>. Some additional clipboard event-specific processing rules are given below:</p>
     <p class="issue" id="issue-7d2ab940"><a class="self-link" href="#issue-7d2ab940"></a> Why here? Why not in the HTML spec?</p>
     <ol>
      <li data-md="">
       <p>If a script calls <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-cleardata">clearData()</a> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransferitemlist-clear">clear</a></code> and the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> objectâs <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-store-mode">drag data store mode</a> flag is <em>read/write</em></p>
       <ol>
        <li data-md="">
         <p>set the <var>clear-was-called</var> flag to true. If an argument is given, add the argument to the <var>types-to-clear</var> list.</p>
       </ol>
      <li data-md="">
       <p>If a script calls <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData()</a> or modifies items and the <var>clear-was-called</var> flag is true</p>
       <ol>
        <li data-md="">
         <p>If the <var>types-to-clear</var> list is empty</p>
         <ol>
          <li data-md="">
           <p>set the <var>clear-was-called</var> flag to false</p>
         </ol>
        <li data-md="">
         <p>else, if <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData()</a>âs <code>type</code> argument or the new itemâs <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-item-type-string">drag data item type string</a> is found in the <var>types-to-clear</var> list</p>
         <ol>
          <li data-md="">
           <p>remove it from the list. If the list is now empty, set the <var>clear-was-called</var> flag to false</p>
         </ol>
       </ol>
      <li data-md="">
       <p>If a script calls <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-getdata">getData()</a> or accesses items in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> and <var>clipboard-entry</var> is set</p>
       <ol>
        <li data-md="">
         <p>check that the clipboard dataâs sequence number matches <var>clipboard-entry</var>. If the clipboard no longer contains the same entry, set the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> objectâs <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-data-store-mode">drag data store mode</a> to the <i>disabled mode</i></p>
       </ol>
     </ol>
     <p>Warning: A malicious script listening to a paste event may set up a never-ending loop in order to read what the user places on the clipboard in the future. On platforms where a clipboard sequence number is not available, other limitations should be implemented.</p>
   </ol>
   <h2 class="heading settled" data-level="5" id="clipboard-event-interfaces"><span class="secno">5. </span><span class="content"><dfn data-dfn-type="dfn" data-noexport="" id="clipboard-event">Clipboard event<a class="self-link" href="#clipboard-event"></a></dfn> interfaces</span><a class="self-link" href="#clipboard-event-interfaces"></a></h2>
   <p>The ClipboardEvent interface extends the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event">Event</a></code> interface.</p>
   <p>The interface can be used to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#constructing-events">construct events</a>. An example is given below:</p>
<pre class="example javascript" id="example-9907cb08"><a class="self-link" href="#example-9907cb08"></a>var pasteEvent = new ClipboardEvent('paste');
pasteEvent.clipboardData.items.add('My string', 'text/plain');
document.dispatchEvent(pasteEvent);
</pre>
   <p class="note" role="note">Note: Synthetic events do not have default actions. In other words, while the script above will fire a paste event, the data will not actually be pasted into the document.</p>
   <div id="clipboardeventinit-idl">
<pre class="idl highlight def" data-highlight="webidl"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-clipboardeventinit">ClipboardEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a>? <dfn class="nv idl-code" data-default="null" data-dfn-for="ClipboardEventInit" data-dfn-type="dict-member" data-export="" data-type="DataTransfer? " id="dom-clipboardeventinit-clipboarddata">clipboardData<a class="self-link" href="#dom-clipboardeventinit-clipboarddata"></a></dfn> = <span class="kt">null</span>;
};
</pre>
    <dl>
     <dt data-md="">
      <p><dfn data-dfn-for="ClipboardEventInit" data-dfn-type="dfn" data-noexport="" id="clipboardeventinit-clipboarddata">clipboardData<a class="self-link" href="#clipboardeventinit-clipboarddata"></a></dfn></p>
     <dd data-md="">
      <p>A <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> object to hold data and meta data related to the event</p>
    </dl>
   </div>
   <div id="clipboardevent-idl">
<pre class="idl highlight def" data-highlight="webidl">[<dfn class="nv idl-code" data-dfn-for="ClipboardEvent" data-dfn-type="constructor" data-export="" data-lt="ClipboardEvent(type, eventInitDict)|ClipboardEvent(type)" id="dom-clipboardevent-clipboardevent">Constructor<a class="self-link" href="#dom-clipboardevent-clipboardevent"></a></dfn>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="ClipboardEvent/ClipboardEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-clipboardevent-clipboardevent-type-eventinitdict-type">type<a class="self-link" href="#dom-clipboardevent-clipboardevent-type-eventinitdict-type"></a></dfn>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-clipboardeventinit" id="ref-for-dictdef-clipboardeventinit-1">ClipboardEventInit</a> <dfn class="nv idl-code" data-dfn-for="ClipboardEvent/ClipboardEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-clipboardevent-clipboardevent-type-eventinitdict-eventinitdict">eventInitDict<a class="self-link" href="#dom-clipboardevent-clipboardevent-type-eventinitdict-eventinitdict"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="clipboardevent">ClipboardEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a>? <dfn class="nv idl-code" data-dfn-for="ClipboardEvent" data-dfn-type="attribute" data-export="" data-readonly="" data-type="DataTransfer?" id="dom-clipboardevent-clipboarddata">clipboardData<a class="self-link" href="#dom-clipboardevent-clipboarddata"></a></dfn>;
};
</pre>
    <dl>
     <dt data-md="">
      <p><dfn data-dfn-for="ClipboardEvent" data-dfn-type="dfn" data-noexport="" id="clipboardevent-clipboarddata">clipboardData<a class="self-link" href="#clipboardevent-clipboarddata"></a></dfn></p>
     <dd data-md="">
      <p>The clipboardData attribute is an instance of the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> interface which lets a script read and manipulate values on the system clipboard during user-initiated copy, cut and paste operations. The associated drag data store is a live but filtered view of the system clipboard, exposing <a data-link-type="dfn" href="#mandatory-data-types" id="ref-for-mandatory-data-types-2">mandatory data types</a> the implementation knows the script can safely access. For synthetic events, the drag data store contains the data added by the script that created the event.</p>
     <dd data-md="">
      <p>The clipboardData objectâs <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-items">items</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-files">files</a></code> properties enable processing of multi-part or non-textual data from the clipboard.</p>
    </dl>
   </div>
   <h2 class="heading settled" data-level="6" id="writing-contents-to-clipboard"><span class="secno">6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="writing-contents-to-the-clipboard">Writing contents to the clipboard</dfn></span><a class="self-link" href="#writing-contents-to-clipboard"></a></h2>
   <p>To update the clipboard contents, follow these steps, given a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> list <em>items</em>, a <em>clear-was-called</em> flag and a <em>types-to-clear</em> list:</p>
   <ol>
    <li data-md="">
     <p>If the <em>items</em> list is not empty</p>
     <ol>
      <li data-md="">
       <p>Clear the clipboard</p>
      <li data-md="">
       <p>For each part in the list,</p>
       <ol>
        <li data-md="">
         <p>If data type is <i>text/plain</i></p>
         <ol>
          <li data-md="">
           <p>Ensure encoding is correct per OS and locale conventions</p>
          <li data-md="">
           <p>Normalize line endings according to platform conventions</p>
          <li data-md="">
           <p>Place text on clipboard with the appropriate OS clipboard format description</p>
         </ol>
        <li data-md="">
         <p>Otherwise, if data is of a type listed in the <a data-link-type="dfn" href="#mandatory-data-types" id="ref-for-mandatory-data-types-3">mandatory data types</a> list</p>
         <ol>
          <li data-md="">
           <p>Place part on clipboard with the appropriate OS clipboard format description</p>
         </ol>
        <li data-md="">
         <p>Otherwise</p>
         <ol>
          <li data-md="">
           <p>This is left to the implementation...</p>
           <p class="issue" id="issue-77e1973e"><a class="self-link" href="#issue-77e1973e"></a> Itâs not good to leave things up to the implementation. What should happen here?</p>
           <p class="note" role="note">Note: Due to limitations in the implementation of operating system clipboards, scripts should not assume that custom formats will be available to other applications on the system. For example, there is a limit to how many custom clipboard formats can be registered in Microsoft Windows. While it is possible to use any string for <a data-link-type="functionish" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData()</a>âs type argument, sticking to the <a data-link-type="dfn" href="#mandatory-data-types" id="ref-for-mandatory-data-types-4">mandatory data types</a> is strongly recommended.</p>
         </ol>
       </ol>
     </ol>
    <li data-md="">
     <p>Otherwise, the <em>items</em> list is empty. Follow these steps to determine whether to clear the clipboard:</p>
     <ol>
      <li data-md="">
       <p>If the list of items is empty and the <var>clear-was-called</var> flag is <i>true</i></p>
       <ol>
        <li data-md="">
         <p>If the <var>types-to-clear</var> list is empty</p>
         <ol>
          <li data-md="">
           <p>Clear the clipboard</p>
         </ol>
        <li data-md="">
         <p>Else</p>
         <ol start="2">
          <li data-md="">
           <p>Remove types in the <var>types-to-clear</var> list from the clipboard in an operating system and implementation-specific way</p>
           <p class="issue" id="issue-0a3703dc"><a class="self-link" href="#issue-0a3703dc"></a> The "remove specific types from clipboard" feature is at risk. It doesnât seem all that important, and itâs unclear if it can be implemented easily across relevant platforms.</p>
         </ol>
       </ol>
     </ol>
   </ol>
   <h2 class="heading settled" data-level="7" id="integration-with-other-scripts-and-events"><span class="secno">7. </span><span class="content">Integration with other scripts and events</span><a class="self-link" href="#integration-with-other-scripts-and-events"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="allow-modify-clipboard"><span class="secno">7.1. </span><span class="content">Event handlers that are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="allowed-to-modify-the-clipboard">allowed to modify the clipboard</dfn></span><a class="self-link" href="#allow-modify-clipboard"></a></h3>
    Event handlers may write to the clipboard if any of the following is true: 
   <ul>
    <li data-md="">
     <p>The action which triggers the event is invoked from the user-agentâs own user interface, e.g. from a "Copy" menu entry or shortcut key.</p>
    <li data-md="">
     <p>The action which triggers the event is invoked from a scripting thread which is <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#allowed-to-show-a-popup">allowed to show a popup</a>.</p>
   </ul>
   <p>The implementation <em>may</em> allow other trusted event types to modify the clipboard if the implementation authors believe that those event types are likely to express user intention. The implementation <em>may</em> also support configuration that trusts specific sites or apps to modify the clipboard regardless of the origin of the scripting thread.</p>
   <p>Synthetic cut and copy events <em>must not</em> modify data on the system clipboard.</p>
   <h3 class="heading settled" data-level="7.2" id="allow-read-clipboard"><span class="secno">7.2. </span><span class="content">Event handlers that are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="allowed-to-read-from-clipboard">allowed to read from clipboard</dfn></span><a class="self-link" href="#allow-read-clipboard"></a></h3>
   <p>Event handlers may read data from the system clipboard if either of the following is true</p>
   <ul>
    <li data-md="">
     <p>The action that triggers the event is invoked from the user-agentâs own user interface, e.g. a "Paste" menu entry or shortcut key.</p>
    <li data-md="">
     <p>The script that triggers the action is running on a site which through an implementation-dependant mechanism is given permission to read data from the clipboard.</p>
    <li data-md="">
     <p>The action that triggers the event is triggered in an app with permissions to read the clipboard.</p>
   </ul>
   <p>Synthetic paste events <em>must not</em> give a script access to data on the real system clipboard.</p>
   <h3 class="heading settled" data-level="7.3" id="integration-with-rich-text-editing"><span class="secno">7.3. </span><span class="content">Integration with rich text editing APIs</span><a class="self-link" href="#integration-with-rich-text-editing"></a></h3>
   <p>If an implementation supports ways to execute clipboard commands through scripting, for example by calling the <code>document.execCommand()</code> method with the commands "cut", "copy" and "paste", the implementation <em>must</em> trigger the corresponding action, which again will dispatch the associated clipboard event.</p>
   <p>These are the steps to follow when triggering copy, cut or paste actions through a scripting API:</p>
   <ol>
    <li data-md="">
     <p>Execute the corresponding action synchronously.</p>
    <li data-md="">
     <p>Use the actionâs return value as the return value for the API call.</p>
   </ol>
   <p class="note" role="note">Note: Copy and cut commands triggered through a scripting API will only affect the contents of the real clipboard if the event is dispatched from an event that is trusted and triggered by the user, or if the implementation is configured to allow this. Paste commands triggered through a scripting API will only fire paste events and give access to clipboard contents if the implementation is configured to allow this. How implementations can be configured to allow read or write access to the clipboard is outside the scope of this specification.</p>
   <h3 class="heading settled" data-level="7.4" id="otherevents"><span class="secno">7.4. </span><span class="content">Interaction with other events</span><a class="self-link" href="#otherevents"></a></h3>
   <p>If the clipboard operation is triggered by keyboard input, the implementation <em>must</em> fire the corresponding event as the default action of the <b>keydown</b> event that initiates the clipboard operation. For example, if the user presses <kbd>Ctrl-C</kbd> to copy, dispatching a copy event <em>must</em> be the default action of the C keyâs keydown event. The event is asynchronous but <em>must</em> be dispatched before <b>keyup</b> events for the relevant keys.</p>
   <p>The cut and paste actions <em>may</em> cause the implementation to dispatch other supported events, such as textInput, input, change, validation events, DOMCharacterDataModified and DOMNodeRemoved / DOMNodeInserted. Any such events are queued up to fire after processing of the cut/paste event is finished.</p>
   <p>The implementation <em>must not</em> dispatch other input-related events like textInput, input, change, and validation events in response to the copy operation.</p>
   <h3 class="heading settled" data-level="7.5" id="selection-mod"><span class="secno">7.5. </span><span class="content">Event listeners that modify selection or focus</span><a class="self-link" href="#selection-mod"></a></h3>
   <p>If the event listener modifies the selection or focus, the clipboard action <em>must</em> be completed on the modified selection.</p>
   <h2 class="heading settled" data-level="8" id="pasting-html"><span class="secno">8. </span><span class="content">Pasting HTML and multi-part data</span><a class="self-link" href="#pasting-html"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="security-risks"><span class="secno">8.1. </span><span class="content">Security risks</span><a class="self-link" href="#security-risks"></a></h3>
   <p><em>This section is non-normative.</em></p>
   <p>There are certain security risks associated with pasting formatted or multi-part data.</p>
   <ul>
    <li data-md="">
     <p>The user might paste hidden data without realising is there. This may happen if, for example, the markup includes &lt;input type="hidden"> tags or HTML comments. Such hidden data might contain sensitive information.</p>
    <li data-md="">
     <p>The user might paste malicious JavaScript into a trusted page.</p>
    <li data-md="">
     <p>The implementation might grant scripts access to local files the user did not intend to expose.</p>
   </ul>
   <p>To determine what policies to use, the factors we consider are:</p>
   <ul>
    <li data-md="">
     <p>The origin of the data being pasted</p>
    <li data-md="">
     <p>The origin of data sub-parts such as referenced images</p>
    <li data-md="">
     <p>The origin of the running script</p>
   </ul>
   <p>This is an overview of the scenarios and the possible security policies:</p>
   <table class="simple">
    <tbody>
     <tr>
      <th>Origin of data
      <th>Origin of script
      <th>Rules
     <tr>
      <td rowspan="2">Originates from online source
      <td>Same as data
      <td>Do not sanitize HTML. Do not access any local files.
     <tr>
      <td>Different origin
      <td>Optionally sanitize content. Do not access any local files.
     <tr>
      <td>Originates from local application
      <td>Any
      <td>Do not sanitize HTML. Grant access to local files
   </table>
   <p>Some implementations mitigate the risks associated with pasting rich text by stripping potentially malicious content such as SCRIPT elements and javascript: links by default when pasting rich text, but allow a paste event handler to retrieve and process  the original, un-sanitized data.</p>
   <h3 class="heading settled" data-level="8.2" id="general-security-policies"><span class="secno">8.2. </span><span class="content">General security policies</span><a class="self-link" href="#general-security-policies"></a></h3>
   <p>The implementation <em>must not</em> download referenced online resources, or expose their contents in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-files">files</a></code> list or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code>.</p>
   <p>If the data on the clipboard is not from a local application, the implementation <em>must not</em> give access to any referenced local files. For example, if the data contains &lt;img src="file://localhost/example.jpg"> but the dataâs origin is an online resource, the implementation must not add an entry for example.jpg to the clipboardData.items list.</p>
   <h2 class="heading settled" data-level="9" id="other-security-considerations"><span class="secno">9. </span><span class="content">Other security and privacy considerations</span><a class="self-link" href="#other-security-considerations"></a></h2>
   <p>Enabling authors to change what is copied by a user, or to make an automated copy of something that was never selected and allowing unrestricted calls to paste information can raise various security and privacy concerns.</p>
   <p>An example scenario of a problem is where a user selects a link and copies it, but a different link is copied to the clipboard. The effect of this can range from an unexpected result on pasting to an attempted "phishing" attack.</p>
   <h3 class="heading settled" data-level="9.1" id="privacy-concerns"><span class="secno">9.1. </span><span class="content">Privacy concerns</span><a class="self-link" href="#privacy-concerns"></a></h3>
   <p>Untrusted scripts should not get uncontrolled access to a userâs clipboard data. This specification assumes that granting access to the current clipboard data when a user explicitly initiates a paste operation from the user agentâs trusted chrome is acceptable. However, implementors must proceed carefully, and as a minimum implement the precautions below:</p>
   <ul>
    <li data-md="">
     <p>Objects implementing the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> interface to return clipboard data <em>must not</em> be available outside the ClipboardEvent event handler.</p>
    <li data-md="">
     <p>If a script stores a reference to an object implementing the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> interface to use from outside the ClipboardEvent event handler, all methods <em>must</em> be no-ops when called outside the expected context.</p>
    <li data-md="">
     <p>Implementations <em>must not</em> let scripts create synthetic clipboard events to get access to real clipboard data except if configured to do so.</p>
    <li data-md="">
     <p>Implementations <em>should not</em> let scripts call document.execCommand("paste") unless the user has explicitly allowed it.</p>
   </ul>
   <p>Implementations may choose to further limit the functionality provided by the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> interface. For example, an implementation may allow the user to disable this API, or configure which web sites should be granted access to it.</p>
   <h3 class="heading settled" data-level="9.2" id="nuisances"><span class="secno">9.2. </span><span class="content">Nuisance considerations</span><a class="self-link" href="#nuisances"></a></h3>
   <p>Scripts may use the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> API to annoy and confuse users by altering the data on the system clipboard from copy and cut events. This specification does not attempt to prevent such nuisances, though implementations may add additional restrictions.</p>
   <p>Implementations must handle scripts that try to place excessive amounts of data on the clipboard gracefully.</p>
   <h2 class="heading settled" data-level="10" id="mandatory-data-types-x"><span class="secno">10. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="mandatory-data-types">Mandatory data types</dfn></span><a class="self-link" href="#mandatory-data-types-x"></a></h2>
   <p>The implementation must recognise the native OS clipboard format description for the following data types, to be able to populate the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a></code> with the correct description for paste events, and set the correct data format on the OS clipboard in response to copy and cut events.</p>
   <h3 class="heading settled" data-level="10.1" id="reading-from-clipboard"><span class="secno">10.1. </span><span class="content">Reading from the clipboard</span><a class="self-link" href="#reading-from-clipboard"></a></h3>
   <p>These data types must be exposed by <em>paste</em> events if a corresponding native type exists on the clipboard:</p>
   <ul>
    <li data-md="">
     <p>text/plain</p>
    <li data-md="">
     <p>text/uri-list</p>
    <li data-md="">
     <p>text/csv</p>
    <li data-md="">
     <p>text/css</p>
    <li data-md="">
     <p>text/html</p>
    <li data-md="">
     <p>application/xhtml+xml</p>
    <li data-md="">
     <p>image/png</p>
    <li data-md="">
     <p>image/jpg, image/jpeg</p>
    <li data-md="">
     <p>image/gif</p>
    <li data-md="">
     <p>image/svg+xml</p>
    <li data-md="">
     <p>application/xml, text/xml</p>
    <li data-md="">
     <p>application/javascript</p>
    <li data-md="">
     <p>application/json</p>
    <li data-md="">
     <p>application/octet-stream</p>
   </ul>
   <h3 class="heading settled" data-level="10.2" id="writing-to-clipboard"><span class="secno">10.2. </span><span class="content">Writing to the clipboard</span><a class="self-link" href="#writing-to-clipboard"></a></h3>
   <p>These data types must be placed on the clipboard with a corresponding native type description if added to a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a></code> object during <em>copy</em> and <em>cut</em> events.</p>
   <ul>
    <li data-md="">
     <p>text/plain</p>
    <li data-md="">
     <p>text/uri-list</p>
    <li data-md="">
     <p>text/csv</p>
    <li data-md="">
     <p>text/html</p>
    <li data-md="">
     <p>image/svg+xml</p>
    <li data-md="">
     <p>application/xml, text/xml</p>
    <li data-md="">
     <p>application/json</p>
   </ul>
   <p>Warning: Data types untrusted scripts are allowed to write to the clipboard is limited as a security precaution. Untrusted scripts can attempt to exploit security vulnerabilities in local software by placing data known to trigger those vulnerabilities on the clipboard.</p>
   <h2 class="heading settled" data-level="11" id="security"><span class="secno">11. </span><span class="content">Security Considerations</span><a class="self-link" href="#security"></a></h2>
   <p>TODO</p>
   <h2 class="heading settled" data-level="12" id="privacy"><span class="secno">12. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy"></a></h2>
   <p>TODO</p>
   <h2 class="heading settled" data-level="13" id="Acknowledg"><span class="secno">13. </span><span class="content">Acknowledgements</span><a class="self-link" href="#Acknowledg"></a></h2>
   <p><em>This section is informative</em></p>
   <p>The editors would like to acknowledge their intellectual debt to the
	documentation of Data Transfer functionalities from Microsoft <a data-link-type="biblio" href="#biblio-microsoft-clip-op">[MICROSOFT-CLIP-OP]</a> and earlier drafts of the <a data-link-type="biblio" href="#biblio-html5">[HTML5]</a> specification.  We are also grateful for the draft "safe copy and paste" from Paul Libbrecht (this draft is no longer available on the Web).</p>
   <p>We would like to acknowledge the contributions made by the following:</p>
   <p>Shawn Carnell, Daniel Dardailler, Al Gilman, Lachlan Hunt, Aaron
	Leventhal, Jim Ley, Paul Libbrecht, "Martijn", Dave Poehlman, Chris Mills, "ROBO Design",
	Janina Sajka, Rich Schwerdtfeger, Jonas Sicking, Maciej Stachowiak, Mihai
	Sucan, Tom Wlodkowski, Anne van Kesteren, Tarquin Wilton-Jones, Dmitry Titov,
	Robert OâCallahan, Ryosuke Niwa, Ian Hickson, Ojan Vafai, Daniel Cheng, Adam Barth, ms2ger, Glenn Maynard, James Graham, James Greene, Boris Zbarsky, Philip JÃ¤genstedt.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
   <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words âMUSTâ,
    âMUST NOTâ, âREQUIREDâ, âSHALLâ, âSHALL NOTâ, âSHOULDâ, âSHOULD NOTâ,
    âRECOMMENDEDâ, âMAYâ, and âOPTIONALâ in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
   <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
   <p>Examples in this specification are introduced with the words âfor exampleâ
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="example-f839f6c8">
    <a class="self-link" href="#example-f839f6c8"></a> 
    <p>This is an example of an informative example.</p>
   </div>
   <p>Informative notes begin with the word âNoteâ and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
   <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is <dfn data-dfn-type="dfn" data-lt="processing equivalence" data-noexport="" id="dfn-processing-equivalence">equivalent<a class="self-link" href="#dfn-processing-equivalence"></a></dfn>. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
  </div>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#allowed-to-modify-the-clipboard">allowed to modify the clipboard</a><span>, in Â§7.1</span>
   <li><a href="#allowed-to-read-from-clipboard">allowed to read from clipboard</a><span>, in Â§7.2</span>
   <li>
    clipboardData
    <ul>
     <li><a href="#dom-clipboardeventinit-clipboarddata">dict-member for ClipboardEventInit</a><span>, in Â§5</span>
     <li><a href="#clipboardeventinit-clipboarddata">dfn for ClipboardEventInit</a><span>, in Â§5</span>
     <li><a href="#dom-clipboardevent-clipboarddata">attribute for ClipboardEvent</a><span>, in Â§5</span>
     <li><a href="#clipboardevent-clipboarddata">dfn for ClipboardEvent</a><span>, in Â§5</span>
    </ul>
   <li><a href="#clipboard-event">Clipboard event</a><span>, in Â§5</span>
   <li><a href="#clipboardevent">ClipboardEvent</a><span>, in Â§5</span>
   <li><a href="#dictdef-clipboardeventinit">ClipboardEventInit</a><span>, in Â§5</span>
   <li><a href="#dom-clipboardevent-clipboardevent">ClipboardEvent(type)</a><span>, in Â§5</span>
   <li><a href="#dom-clipboardevent-clipboardevent">ClipboardEvent(type, eventInitDict)</a><span>, in Â§5</span>
   <li><a href="#editable-context">editable context</a><span>, in Â§3</span>
   <li><a href="#fire-a-clipboard-event">fire a clipboard event</a><span>, in Â§4.2</span>
   <li><a href="#mandatory-data-types">Mandatory data types</a><span>, in Â§10</span>
   <li><a href="#dfn-processing-equivalence">processing equivalence</a><span>, in Â§Unnumbered section</span>
   <li><a href="#script-may-access-clipboard">script-may-access-clipboard</a><span>, in Â§4.1</span>
   <li><a href="#script-triggered">script-triggered</a><span>, in Â§4.1</span>
   <li><a href="#writing-contents-to-the-clipboard">Writing contents to the clipboard</a><span>, in Â§6</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
     <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#datatransferitemlist">DataTransferItemList</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransferitemlist-clear">clear</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-cleardata">clearData()</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-files">files</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-getdata">getData(format)</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-items">items</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-setdata">setData(format, data)</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-types">types</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-htmlls">[HTMLLS]
   <dd>Ian Hickson. WHATWG.. <a href="https://html.spec.whatwg.org/multipage/">HTML Living Standard</a>. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-rfc2392">[RFC2392]
   <dd>E. Levinson. <a href="http://www.ietf.org/rfc/rfc2392.txt">Content-ID and Message-ID Uniform Resource Locators. August 1998. Internet RFC 2392.</a>. URL: <a href="http://www.ietf.org/rfc/rfc2392.txt">http://www.ietf.org/rfc/rfc2392.txt</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/html/wg/drafts/html/master/">HTML5</a>. URL: <a href="https://www.w3.org/html/wg/drafts/html/master/">https://www.w3.org/html/wg/drafts/html/master/</a>
   <dt id="biblio-microsoft-clip-op">[MICROSOFT-CLIP-OP]
   <dd><a href="http://msdn.microsoft.com/en-us/library/ms537658.aspx">About DHTML Data Transfer. Microsoft Developer Network.</a>. URL: <a href="http://msdn.microsoft.com/en-us/library/ms537658.aspx">http://msdn.microsoft.com/en-us/library/ms537658.aspx</a>
   <dt id="biblio-svg">[SVG]
   <dd>Jon Ferraiolo. <a href="https://www.w3.org/TR/SVG/">Scalable Vector Graphics (SVG) 1.0 Specification</a>. 4 September 2001. REC. URL: <a href="https://www.w3.org/TR/SVG/">https://www.w3.org/TR/SVG/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def"><span class="kt">dictionary</span> <a class="nv" href="#dictdef-clipboardeventinit">ClipboardEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a>? <a class="nv" data-default="null" data-type="DataTransfer? " href="#dom-clipboardeventinit-clipboarddata">clipboardData</a> = <span class="kt">null</span>;
};

[<a class="nv" href="#dom-clipboardevent-clipboardevent">Constructor</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-clipboardevent-clipboardevent-type-eventinitdict-type">type</a>, <span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-clipboardeventinit">ClipboardEventInit</a> <a class="nv" href="#dom-clipboardevent-clipboardevent-type-eventinitdict-eventinitdict">eventInitDict</a>)]
<span class="kt">interface</span> <a class="nv" href="#clipboardevent">ClipboardEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer">DataTransfer</a>? <a class="nv" data-readonly="" data-type="DataTransfer?" href="#dom-clipboardevent-clipboarddata">clipboardData</a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Are these steps necessary? Do we know about native (platform) clipboard implementations that support multiple parts with internal references?<a href="#issue-096a5049"> âµ </a></div>
   <div class="issue"> This feature is at risk because itâs unclear whether it is required, and because itâs hard to test in a cross-platform way.<a href="#issue-6be1122f"> âµ </a></div>
   <div class="issue"> Why here? Why not in the HTML spec?<a href="#issue-7d2ab940"> âµ </a></div>
   <div class="issue"> Itâs not good to leave things up to the implementation. What should happen here?<a href="#issue-77e1973e"> âµ </a></div>
   <div class="issue"> The "remove specific types from clipboard" feature is at risk. It doesnât seem all that important, and itâs unclear if it can be implemented easily across relevant platforms.<a href="#issue-0a3703dc"> âµ </a></div>
  </div>
  <aside class="dfn-panel" data-for="editable-context">
   <b><a href="#editable-context">#editable-context</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-editable-context-1">4.1.2. The cut action</a> <a href="#ref-for-editable-context-2">(2)</a> <a href="#ref-for-editable-context-3">(3)</a>
    <li><a href="#ref-for-editable-context-4">4.1.3. The paste action</a> <a href="#ref-for-editable-context-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-a-clipboard-event">
   <b><a href="#fire-a-clipboard-event">#fire-a-clipboard-event</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fire-a-clipboard-event-1">4.1.1. The copy action</a> <a href="#ref-for-fire-a-clipboard-event-2">(2)</a>
    <li><a href="#ref-for-fire-a-clipboard-event-3">4.1.2. The cut action</a> <a href="#ref-for-fire-a-clipboard-event-4">(2)</a>
    <li><a href="#ref-for-fire-a-clipboard-event-5">4.1.3. The paste action</a> <a href="#ref-for-fire-a-clipboard-event-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-clipboardeventinit">
   <b><a href="#dictdef-clipboardeventinit">#dictdef-clipboardeventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-clipboardeventinit-1">5. Clipboard event interfaces</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="clipboardevent">
   <b><a href="#clipboardevent">#clipboardevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-clipboardevent-1">4.2. Processing model for event dispatch</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="writing-contents-to-the-clipboard">
   <b><a href="#writing-contents-to-the-clipboard">#writing-contents-to-the-clipboard</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writing-contents-to-the-clipboard-1">4.1.1. The copy action</a>
    <li><a href="#ref-for-writing-contents-to-the-clipboard-2">4.1.2. The cut action</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="allowed-to-modify-the-clipboard">
   <b><a href="#allowed-to-modify-the-clipboard">#allowed-to-modify-the-clipboard</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-allowed-to-modify-the-clipboard-1">4.1. Actions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="allowed-to-read-from-clipboard">
   <b><a href="#allowed-to-read-from-clipboard">#allowed-to-read-from-clipboard</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-allowed-to-read-from-clipboard-1">4.1. Actions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="mandatory-data-types">
   <b><a href="#mandatory-data-types">#mandatory-data-types</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-mandatory-data-types-1">4.2. Processing model for event dispatch</a>
    <li><a href="#ref-for-mandatory-data-types-2">5. Clipboard event interfaces</a>
    <li><a href="#ref-for-mandatory-data-types-3">6. Writing contents to the clipboard</a> <a href="#ref-for-mandatory-data-types-4">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>